ARG PHP_VERSION

FROM objectsystems/php:${PHP_VERSION}
MAINTAINER Web Team <phpteam@objectsystems.com>

RUN apt-get update && apt-get install --allow-unauthenticated -y \
        php${PHP_VERSION}-xdebug \
        git \
        curl \
    && curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/local/bin --filename=composer \
    && mkdir -p /var/www && chown -R www-data: /var/www \
    && echo "" >> /etc/php/${PHP_VERSION}/mods-available/xdebug.ini \
    && echo "xdebug.remote_enable=1" >> /etc/php/${PHP_VERSION}/mods-available/xdebug.ini \
    && echo "xdebug.profiler_enable=0" >> /etc/php/${PHP_VERSION}/mods-available/xdebug.ini \
    && echo "xdebug.remote_connect_back=1" >> /etc/php/${PHP_VERSION}/mods-available/xdebug.ini \
    && echo "xdebug.var_display_max_depth=-1" >> /etc/php/${PHP_VERSION}/mods-available/xdebug.ini \
    && echo "xdebug.var_display_max_children=-1" >> /etc/php/${PHP_VERSION}/mods-available/xdebug.ini \
    && echo "xdebug.var_display_max_data=-1" >> /etc/php/${PHP_VERSION}/mods-available/xdebug.ini

